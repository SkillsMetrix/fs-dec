package com.project;

import java.math.BigDecimal;
import java.time.LocalDateTime;
import java.time.format.DateTimeFormatter;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Comparator;
import java.util.List;
import java.util.Optional;
import java.util.stream.Collectors;

public class BookingService {
	private List<Flight> flights;
	
	private DateTimeFormatter formatter= DateTimeFormatter.ofPattern("dd MMM yyyy HH:mm");
	
	public BookingService() {
		
		
		flights=new ArrayList<>(List.of(
				new Flight("AI101", "Delhi","Mumbai", LocalDateTime.now().plusHours(5), BigDecimal.valueOf(5500),
						List.of(new Passenger("Amar", "amar@mail.com"),
								new Passenger("sumit", "sumit@mail.com"))),
				
				new Flight("AI102", "Delhi","Bangalore", LocalDateTime.now().plusHours(3), BigDecimal.valueOf(6500),
						List.of(new Passenger("Amar", "amar@mail.com"))),
				
				new Flight("AI103", "Mumbai","Chennai", LocalDateTime.now().plusHours(6), BigDecimal.valueOf(4800),
						List.of()),
				
				new Flight("AI104", "Delhi","Mumbai", LocalDateTime.now().plusHours(2), BigDecimal.valueOf(6000),
						
						List.of(new Passenger("harish", "hari@mail.com")))
				));
	}
				
				
		public List<Flight> searchFlight(String origin,String destination){
		return flights.stream()
				.filter(f -> f.origin().equalsIgnoreCase(origin))
				.filter(f ->f.destination().equalsIgnoreCase(destination))
				.sorted(Comparator.comparing(Flight :: departureTime))
				.collect(Collectors.toList());
	}
	
